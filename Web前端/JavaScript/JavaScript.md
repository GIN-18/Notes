#  JavaScript笔记

**W3School的JavaScript教程**：https://www.w3school.com.cn/js/index.asp

浏览器分为两部分：**渲染引擎**，**JavaScript引擎**。

**渲染引擎**：用来解释HTML和CSS，俗称内核。

**JavaScript引擎**：也称JavaScript解释器，用来读取网页中的JavaScript代码，对其处理后运行。

浏览器本身是不会执行JavaScript代码的，而是通过内置的JavaScript引擎来执行JavaScript代码。JavaScript代码是逐行解释的，因此JavaScript属于脚本语言。所谓的脚本语言就是指不具备开发操作系统的能力，而是只用来编写控制其他大型应用程序的脚本。

JavaScript也是一种嵌入式语言，JavaScript本身提供的核心语法不算很多，只能用来做一些数学和逻辑运算。JavaScript本身不提供任何与I/O相关的API，都要依靠宿主环境供，所以JavaScript只合适嵌入更大型应用程序环境，去调用宿主环境提供的底层API。

目前，已经嵌入JavaScript的宿主环境有多种，最常见的环境就是浏览器，另外还有服务器环境，也就是Node项目。


## JavaScript的组成

JavaScript由三部分组成：**ECMAScript**，**DOM**，**BOM**。

**ECMAScript**：规定了JavaScript编程语法和基础核心知识。是所有浏览器厂商共同遵守的一套JavaScript语法工业标准。

**DOM**：文档对象模型，是一种可以处理标记语言的标准编程接口。通过DOM提供的接口可以对页面上的各种元素进行操作。

**BOM**：浏览器对象模型，提供了独立于内容的，可以与浏览器窗口交互的对象结构。通过BOM可以操作浏览器窗口。


## JavaScript代码的引入和注释

类似css代码的引入方式，JavaScript代码通过&lt;script&gt;标签引入JavaScript代码。

**引入外部JavaScript代码**

语法：

```javascript
<script type="text/javascript" src="url"><script>
```

```
* 其中（type="text/javascript"）属性不是必要的
* 用于引入外部JavaScript的script标签中不能在书写JavaScript代码
```

**外部JavaScript的优势：** 

```
* 分离了HTML和代码
* 使HTML和JavaScript更加易于阅读和维护
* 已缓存的JavaScript文件加速页面的加载
```

## JavaScript注释

单行注释以//开头。

多行注释以 /* 开头，以 */ 结尾。任何位于 /* 和 */ 之间的文本都会被 JavaScript 忽略。

## 严格模式

严格模式是为JavaScript定义了一种不同的解析与执行模型，在严格模式下，ECMAScript 3中的一些不确定的行为将得到处理，而且对某些不安全的操作也会抛出错误。要在整个脚本中启动严格模式，可以在顶部添加**use strict**。也可以在指定函数内部启用严格模式，在指定的函数内部添加**use strict**就可以在函数中启用严格模式。

在严格模式下，JavaScript的执行结果会有很大的不同。


## JavaScript输入输出语句

| 方法             | 说明                                                         |
| ---------------- | ------------------------------------------------------------ |
| alert(msg)       | 浏览器弹出警示框                                             |
| console.log(msg) | 浏览器控制台打印输出信息                                     |
| prompt(info)     | 浏览器弹出输出框，用户可以输入（prompt取得的值是字符串类型的） |


## JavaScript的值

JavaScript语句中定义了两种类型的值：**混合值**，**变量值**。

混合值称为字面量，变量值称为变量。

### 字面量

字面量是在源代码中一个**固定（不可改变）值**的表示法。通俗来说，字面量就是如何表达这个值。

数字字面量：8，9，0

字符串字面量："JavaScript"

布尔字面量：true，false

### 变量

变量是用于存放数据的容器，通过变量名可以获取数据，甚至修改数据。

变量的本质：变量是在内存中申请一块用来存放数据的空间

```
* 一条语句声明多个变量，需要使用逗号将变量名分隔。
* 在脚本开头声明所有的变量是个好习惯。
* 尽量不要使用name作为变量名，在某些浏览器中name有特殊含义。
* 使用var操作符定义的变量将成为定义该变量的作用域中的局部变量。
* 省略var操作符，直接给变量赋值，则变量会提升为全局变量。
```

#### 变量提升

JavaScript引擎的工作方式是先解析代码，获取所有被声明的变量，然后再一行一行地运行。因此，所有的变量的声明语句都会被提升到代码的头部，这就叫做变量提升。

```
console.log(a);
var a = 1;
```

上面的代码首先使用"console.log"方法，在控制台打印a的值。这时a还没有声明和赋值，所以这是一种错误的做法，但是实际运行不会报错。因为存在变量提升，实际运行的是下面的代码。

```
var a;
console.log(a);
a = 1;
```

最后结果显示的是"undefined"，表示变量a已经声明，但还没赋值。

## JavaScript数据类型

JavaScript是一种弱类型语言或者说是动态语言。

JavaScript的数据类型是在程序运行过程中，通过赋于的值来确定的。

JavaScript中变量的数据类型是可以变化的。

### 数据类型的分类

JavaScript把数据类型分为两类：**基本数据类型**，**引用数据类型**。

```
* 基本数据类型：Number（数值），String（字符串），Boolean（布尔），Undefined（未定义），Null（对空），Symbol（ES6引入）。
* 引用数据类型：Object（对象），Array（数组），函数（function）。
```

isNaN()方法可以判断是否为**非数字**的类型，是数字返回false；不是数字返回true。

### Srting（字符串类型）

字符串被引号包裹，可以使用双引号或单引号。

字符串一旦被创建，他们的值就不能改变。要改变某个变量中保存的字符串，首先要销毁原来的字符串，然后再使用另一个包含新值的字符串填充该变量。

**字符串的长度**

字符串由若干字符组成，字符的数量就是字符串的长度。通过字符串的lenght属性可以获取整个字符串的长度。

**字符串的拼接**

```
* 多个字符串之间可以使用+进行拼接。
* 拼接方式：字符串+任何类型=拼接之后的新字符串。
* 这种方法同时使用在字符串和变量之间的相加。
```

### Number（数值）

在JavaScript中只有一种数值类型Number（包括了整数和浮点数）。

浮点运算的结果不能精确，尽量不要在金钱方面使用浮点运算。

### 布尔型

布尔型只有两个值：ture和false。

 ```
 * 布尔值参加运算的时候ture看作1，false看作0。
 * 布尔值常用于条件判断。
 ```

### Undefined和Null

Null数据类型只有一个值：null。

```
* null用来表示一个空对像。
```

Undefined数据类型只有一个值：undefined。

```
* 在使用var声明变量但未加以初始化时，这个变量的值就是undefined。
```

undefined和Null数值相加得到NaN。

### 数据类型转换

把一个数据类型强制转换成另一个数据类型。

#### 其他类型转换为字符串类型

| 方式                       | 说明                       | 案例                                |
| -------------------------- | -------------------------- | ----------------------------------- |
| toString()方法             | 转换成字符串               | var num=1; alert(num.toString());   |
| String()函数               | 转换成字符串               | var num=1; alert(String(num));      |
| 加号拼接字符串（隐式转换） | 和字符串相加结果都是字符串 | var num=1; alert(num+"JavaScript"); |

```
* Null和Undefined这两种数据类型没有toString()方法。
* 调用String()函数，会直接将Null转换成“null”，Undefined转换成“undefined”。
```

#### 其他类型转换成数字类型

| 方式                       | 说明                     | 案例                |
| -------------------------- | ------------------------ | ------------------- |
| parselnt(String)函数       | 将String类型转换成整数型 | parselnt('69')      |
| parseFloat(String)函数     | 将String类型转换成浮点型 | parseFloat('69.69') |
| Number()强制类型转换       | 将String类型转换成数值型 | Number('69')        |
| JavaScript隐式转换(减乘除) | 利用算术运算隐式转换     | '69'-69             |

```
* 在JavaScript中，以0x开头的表示十六进制数字，以0开头的表示八进制数字。
* parseFloat(String)函数只能解析十进制数。
* 在使用parselnt(String)函数转换的时候，可以在转换的字符后添加基数，即转换成多少进制数。
```

#### 其他类型转换成布尔型

| 方式          | 说明                 | 案例            |
| ------------- | -------------------- | --------------- |
| Boolean()函数 | 其他类型转换成布尔型 | Boolean('true') |

```
* 表示空，否定的值会被转换成false。例如，''（空字符串），0，NaN，null，undefined。
```

## 运算符

也称为操作符，用于实现赋值，比较，算术运算等功能的符号。

### 表达式和返回值

表达式：由数字，运算符，变量等组成的式子。

表达式最终会有一个结果返回给用户，返回的结果称为返回值。

### 算数运算符

| 运算符 | 作用                   |
| ------ | ---------------------- |
| +      | 实现加法运算           |
| -      | 实现减法运算           |
| *      | 实现乘法运算           |
| /      | 实现除法运算           |
| %      | 实现取模运算（取余数） |
| ++     | 自增                   |
| --     | 自减                   |

```
* 前置递增（递减）运算：先自加（减），后返回值。

* 后置递增（递减）运算：先返回值，后自加（减）。

* 浮点数的数值最高精度是17位小数，在算术运算时会出现精度问题。
* 不要直接判断两个浮点数是否相等。
* 取模运算一般用于判断一个数是否能被整除。
```

### 递增和递减运算

前（后）置单独使用的时候效果一样。

### 计较运算符

运算结果返回的是一个布尔值。

| 运算符 | 说明                             | 案例      | 结果  |
| ------ | -------------------------------- | --------- | ----- |
| &lt;   | 小于号                           | 1&lt;2    | true  |
| &gt;   | 大于号                           | 1&gt;2    | false |
| &gt;=  | 大于等于                         | 1&gt;=2   | false |
| &lt;=  | 小于等于                         | 1&lt;=2   | true  |
| ==     | 判等号（会转型）                 | 37==37    | true  |
| !=     | 不等号                           | 37!=37    | false |
| ===    | 全等号，要求数值和数据类型都相等 | 37==='37' | false |

### 逻辑运算符

用于进行布尔值运算，其返回值也是布尔值，多用于条件判断。

| 运算符 | 说明          | 案例            |
| ------ | ------------- | --------------- |
| &&     | 逻辑与（and） | true && false   |
| \|\|   | 逻辑或（or）  | true \|\| false |
| !      | 逻辑非（not） | !true           |

**短路运算（逻辑中断）**

短路运算原理：当有多个表达式的时候，左边的表达式可以确定运算结果则不再往右运算。

### 赋值运算符

把数据赋值给变量。

| 运算符     | 说明                     | 案例                    |
| ---------- | ------------------------ | ----------------------- |
| =          | 直接赋值                 | var age=2 //2           |
| +=，-=     | 加（减）一个数后再赋值   | var age=2; age+=5 //7   |
| *=，/=，%= | 乘（除）（取模）后再赋值 | var age=2; age*=5 // 10 |

### 类型运算符

| 运算符     | 说明                               |
| ---------- | ---------------------------------- |
| typeof     | 返回变量的类型                     |
| instanceof | 返回true，如果对象是对象类型的实例 |

typoef可以用来获取检测变量的数据类型

语法：

```javascript
typoef 变量名;
```

### 运算符的优先级

| 优先级 | 运算符     | 顺序                     |
| ------ | ---------- | ------------------------ |
| 1      | 小括号     | （）                     |
| 2      | 一元运算符 | ++，--，！               |
| 3      | 算术运算符 | 先乘除后加减             |
| 4      | 关系运算符 | &lt;，&gt;，&gt;=，&lt;= |
| 5      | 相等运算符 | ==，!=                   |
| 6      | 逻辑运算符 | 先&&后\|\|               |
| 7      | 赋值运算符 | =                        |
| 8      | 逗号运算符 | ，                       |

---

## 流程控制语句

### 分支结构

根据不同的条件，执行不同路径上的代码，从而得到不同的结果。

#### if语句

```javascript
if(条件判断式) {
	执行语句   
}
```

**执行思路**

> * 如果条件判断式结果为真，则执行大括号中的语句。
> * 如果条件判断式结果为假，则执行大括号外的语句。

#### if else语句（双分支语句）

```javascript
if(条件判断式) {
   执行语句1
}else{
    执行语句2
}
```

**执行思路**

> * 如果条件判断式的结果为真，则执行语句1。
> * 如果条件判断式的结果为假，则执行语句2。

#### if else if语句（多分支语句）

利用多个条件来选择不同的语句执行，得到不同的结果。多选一。

语法：

```javascript
if(条件判断式1) {
	语句1
}else if(条件判断式2){
    语句2
}else{
    语句3
}
```

执行思路

> * 如果条件判断式1为真，则执行语句1。
> * 如果条件判断式1为假，则判断条件判断式2，如果条件判断式2为真，则执行语句2。
> * 如果条件判断1和条件判断式2都为假，则执行语句3。

#### switch语句

针对变量设置一系列特定值时，就可以使用switch语句。

语法：

```javascript
switch(表达式) {
       case value1:
       语句1
       break;
       case value2:
       语句2
       break;
       ...
       default:
       最后的语句
}
```

执行思路

> * 如果表达式的值和case的value值匹配则执行相应的语句。如果没有匹配的value值则执行default后的语句。
> * 表达式的值和value值需要全等匹配。

### 循环结构

一组被重复执行的代码称为循环体，终止条件决定循环次数。由循环体和终止条件组成的语句称为循环语句。

#### for循环

语法：

```javascript
for(初始化变量;条件判断式;操作表达式) {
    循环体
}
```

> * 初始化变量：通常用作计数器。
> * 条件判断式：通常用作终止条件。
> * 操作表达式：通常用于更新计数器。

#### 双重for循环

语法：

```javascript
for(外层初始化变量;外层条件判断式;外层操作表达式) {
    for(内层初始化变量;内层条件判断式;内层操作表达式) {
        
    }
}
```

#### while循环

while循环可以做条件判断式成立的时候执行循环体，直到条件判断式不成立。

语法：

```javascript
while(条件判断式) {
      循环体
}
```

执行思路

> * 条件判断式成立，则执行循环体，直到条件判断式不成立。

#### do while循环

语法：

```javascript
do {
    循环体
} while(条件判断式)
```

执行思路

> * 先执行一次循环体，再判断条件。

#### continue关键字

用于立即跳出本次循环，继续执行剩余部分的循环（本次循环体中continue之后的代码会少执行一次）。

break关键字用于跳出整个循环。

### 三元表达式

语法：

```javascript
条件判断式 ? 表达式1 : 表达式2
```

执行思路

> * 如果条件判断式的结果为真，则返回表达式1的值；如果条件判断式的结果为假，则返回表达式2的值。

---

## 数组(Array)

数组是指一组数据的集合，数组中的每个数据称为元素，在数组中可以放任意类型的元素。数组可以将一组数据存放在单个变量名之下的。

### 创建数组

利用数组的字面量创建数组

```javascript
var <数组名> = []; // 创建一个空数组
var <数组名> = ['1','2',...]; //创建一个带初始值的数组
```

数组中的数据使用逗号分隔。

### 访问数组元素

```javascript
数组名[数组下标]
```

### 遍历数组

遍历：把数组中的元素从头到尾都访问一遍。

### 数组的长度

使用"数组名.length"可以访问数组元素的长度。

遍历方式：通过for循环遍历。

### 新增数组元素

通过修改数组长度length来实现数组的扩容。

```javascript
数组名.length=数值;
```

通过修改索引号实现数组扩容。

```javascript
数组名[数组下标]='数组元素'；
```

不要直接给数组名赋值。

---

## 函数(function)

函数就是封装了一段能够重复使用的代码块。

### 函数的声明

javascript有3种声明函数的方法。

**function命令**

**function**命令声明的代码块就是一个函数。**function**命令后面是函数名，函数名后面是一对圆括号，里面是传入函数的参数。函数体放在大括号里面。

```
function print(s) {
  console.log(s);
}
```

上面的代码命名了一个**print**函数。

**函数表达式**

可以采用变量赋值的写法声明函数。

```
var print = function(s) {
  console.log(s);
};
```

在变量中保存函数表达式之后，此变量可以用作函数。

这种写法将一个匿名函数赋值给变量。这个匿名函数又称函数表达式，因为赋值语句的等号右侧只能放表达式。

采用函数表达式声明函数时，**function**命令后面不带有函数名。如果加上函数名，该函数名只在函数体内部有效，在函数体外部无效。

```javascript
var print = function x() {
  console.log(typeof x);
};

x // ReferenceError: x is not defined

print() // function
```

上面的代码在函数表达式中，加入了函数名x。这个x只在函数体内部可用，指代函数表达式本身，其他地方都不可用。

这种写法的用处有两个：

```
1. 可以在函数体内部调用自身
2. 方便除错(除错工具显示函数调用栈时，将显示函数名，而不再显示这是一个匿名函数)
```

因此，下面的形式声明函数也是非常常见。

```
var f = function f() {};
```

需要注意的是，函数表达式需要在语句结尾加上分号，表示语句结束。而函数的声明在结尾的大括号后面不用加分号。

**function构造函数**

这种方式非常不直观，所以不常使用。

### return语句和递归

**return语句**

```javascript
function add(x, y) {
  return x + y;
}

add(1, 1);
```

函数体内部的**return**语句表示返回。javascript引擎遇到**return**语句，就直接返回**return**语句后面的那个表达式的值，后面即使还有语句也不会再执行。**return**语句所带的表达式就是函数的返回值。**return**语句不是必要的，如果没有**return**语句，则该函数不返回任何值，或者返回**undefined**。

**递归**

函数可以调用自身，这就是递归。

### 函数的属性和方法

**name属性**

函数的**name**属性返回函数的名字。

### 立即调用的函数表达式

有时候需要定义函数之后，立即调用该函数。

## 预编译

javascript在被解析之前，js解析引擎首先会把整个文件进行预处理，以消除一些歧义。这个过程就叫做预编译。

### 全局对象(global object)

在浏览器环境中，js引擎会整合script标签中的内容，产生window对象，这个window对象就是全局对象。

在node环境中，会产生global对象。

#### 全局变量

在script标签中声明的变量为"全局变量"，全局变量作为window对象的属性存在。

```javascript
var a = 100;

console.log(a); // 100

console.log(window.a); // 100
```

打印a变量实际上相当于打印window对象的a属性。

#### 全局函数

在script标签中声明的函数为"全局函数"，全局函数作为window对象的方法存在。

```javascript
console.dir(<function>) // 打印函数的内部结构
```

### 活动对象(Activation Object)

在函数调用时产生，用来保存当前函数内部的执行环境，也称为"执行期上下文"。

在函数调用结束时销毁。

如果函数没有执行，那就不会产生AO对象，则在函数中定义的局部变量和局部函数也不会存在，所以不能在函数外部访问函数内部声明的变量和函数。

#### 局部变量

在函数内部声明的变量称为"局部变量"，局部变量作为AO对象的属性存在。

```javascript
function a() {
	var i = 0;
	console.log(i);
}

a();
```

只有在函数调用时，才会产生AO对象。

#### 局部函数

在函数内部声明的函数称为"局部函数"，局部函数作为AO对象的方法存在。

### 全局预编译

#### 流程

```
1. 查找变量声明，作为GO对象的属性名，值为Undefined。

2. 查找函数声明，作为GO对象的属性名，值为function。
```

**变量声明**

```javascript
var a; // 变量声明

var a = 16; // 变量声明+变量赋值
```

**函数声明**

通过function关键字声明函数。

```javascript
function a() {} // 函数声明

var a = function () {}; // 函数表达式，不是函数声明
```

```javascript
console.log(a); // function
var a = 100;
console.log(a); // 100
function a() {
	console.log(16);
}
a(); // 报错，a的值不是一个函数

代码预编译过程：

1. 产生window对象。

2. 查找变量声明，把a作为window对象的属性名，值为Undefined。

3. 查找函数声明，把函数名a作为window对象的属性名，值为function。

4. 全局预编译结束，代码从上到下依次执行。
```

如果存在同名变量和函数，函数的优先级更高。

### 函数预编译

#### 流程

```
1. 在函数调用时，为当前函数产生AO对象。

2. 查找形参和变量声明作为AO对象的属性名，值为Undefined。

3. 使用实参的值改变形参的值。

4. 查找函数声明，把函数名作为AO对象的属性名，值为function。
```

```javascript
function a(test) {
	var i = 0;
	function b() {
		console.log(16);
	}
	b();
}
a(16);

代码执行过程：

1. 产生window对象。

2. GO：(1) 查找变量声明。
			 (2) 查找函数声明，把函数名a作为GO对象的属性名，值为function。

3. 全局预编译结束。

4. 执行代码。调用a()，产生AO对象。

5. AO：(1) 查找形参test，局部变量i作为AO对象的属性名，值为Undefined。
			 (2) 查找实参16，赋值给形参test。
			 (3) 查找局部函数b，把函数名b作为AO对象的属性名，值为Undefined。

6. 函数预编译结束。

7. 执行。
```

只要声明了局部函数，函数的优先级最高。

没有声明局部函数，实参的优先级高。

整体来说：局部函数 > 实参 > 形参。

## 作用域与作用域链

### 作用域

作用域指的是变量存在的范围。在JavaScript中只有2种作用域：**全局作用域**，**函数作用域**。

全局作用域：由script标签产生的区域，从计算机的角度可以理解为window对象。变量在整个程序中一直存在，所有地方都可以读取。

函数作用域：由函数产生的区域，从计算机的角度可以理解为AO对象。变量只在函数内部存在。

ES6新增**块级作用域**。

### 作用域链

在js中，函数存在一个隐式属性[[scopes]]，这个属性用来保存当前函数在执行时的环境(上下文)，由于在数据结构上是链式的，也称为作用域链。可以理解成一个数组。

[[scopes]]属性在函数声明时产生，在函数调用时更新。

[[scopes]]属性记录当前函数的执行环境。

在函数被调用时，该函数的AO对象压入到[[scopes]]中。

```javascript
function a() {
	function b() {
		function c() {}
		c();
	}
	b();
}
a();

1. 产生a函数的AO对象，aAO。
	 函数a的scopes：
								0：aAO={b: fun}
								1：GO

2. 产生b函数的AO对象，bAO。
	 函数b的scopes：
								0：bAO={c: fun}
								1：aAO={b: fun}
								2：GO
...
```

### 作用域链的作用

在访问变量或函数时，会在作用域链上依次查找，最直观的表现是：内部函数可以使用外部函数声明的变量。


## 闭包

如果内部函数使用了外部函数的变量，就会形成闭包。闭包保留了外部函数环境的引用。

如果内部函数被返回到了外部函数的外面，在外部函数执行完后，依然可以使用闭包里的值。

### 闭包的形成

在内部函数使用外部函数的变量，就会形成闭包。闭包是当前作用域的延伸。

从代码的角度看，闭包也是一个对象。

在内部函数中使用了外部函数的变量，这个变量就会作为闭包对象的属性。

```javascript
function a() {
	var aa = 16;
	function b() {
		console.log(b); // 形成闭包
	}
	b();
}
a();

1. 产生aAO对象。
	 aAO：{aa: 16, b: fun}

2. 产生bAO对象。
	 bAO: {}

3. [[scopes]] - 0: bAO
								1: aAO
								2: GO
```

### 闭包的保持

如果希望在函数调用之后，闭包仍然保持，就需要将内部函数返回到外部函数的外部。

```javascript
function a() {
	var num = 0;
	function b() {
		console.log(num++); // 形成闭包
	}
	return b;
}
var demo = a();
demo(); // 相当于b() 0
demo(); // 新产生一个bAO，1

1. GO: {demo: undefined, a: fun}

2. aAO: {num: 0, b: fun}

3. 返回b函数给demo，b函数并没有执行。

4. bAO: {}

5. [[scopes]] - 0: bAO
								1: aAO
								2: GO
```

### 闭包的应用

解决函数外部无法访问函数内部变量的问题。

有时不注意使用了闭包，会导致意想不到的结果。

```
1. 在函数外部访问私有变量。

2. 实现封装。

3. 防止全局变量的污染。
```

```javascript
function Person() {
	var uname;
	function setName(uname) {
		this.uname = uname;
	}
	function getName() {
		return this.uname;
	}
	return {
		getName: getName;
		setName: setName;
	}
}

var xiaoming = new Person();
xiaoming.setName("xiaoming");
console.log(xiaoming.getName());
```

## 面向对象编程

对象使用属性和方法组成的。

对象的属性使用变量来描述。

对象的方法使用函数来描述。

### 类与对象的关系

类是对象的集合。

对象是类的实例化。

### 构造函数

javascript中没有类(class)的概念，主要是通过构造函数来模拟。

```javascript
function <构造函数名>() {
	// 函数体
}
```

使用function关键字定义一个构造函数。

构造函数名一般首字母大写。


<++>




## 内置对象

MDN的内置对象文档：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects

内置对象是JavaScript中自带的一些对象，提供一些常用的或最基本的必要功能。

#### Math对象

MDN的Math对象：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math

**Math.max()最大值方法**

==Math.max()==方法返回一组数中的最大值。

语法：

```javascript
console.log(Math.max(1, 3, 2));
//输出结果为3
console.log(Math.max(-1, -3, -2));
//输出结果为-1
const array1 = [1, 3, 2];
console.log(Math.max(...array1));
//输出结果为3
```

**Math.abs()绝对值方法**

Math.abs()方法返回一个数字“x”的绝对值。

语法：

```javascript
Math.abs(x);
```

**取整方法**

==Math.floor()==方法返回小于或等于一个给定数字的最大整数（向下取整）。

语法：

```javascript
Math.floor(x);
```

==Math.ceil()==方法返回大于或等于一个给定数字的最小整数（）向上取整。

语法：

```javascript
console.log(Math.ceil(.95));
//输出结果为1
console.log(Math.ceil(4));
//输出结果为4
console.log(Math.ceil(7.004));
//输出结果为8
console.log(Math.ceil(-7.004));
//输出结果为-7
```

==Math.round()==方法返回一个数字四舍五入后最接近的整数。

语法：

```javascript
Math.round(x);
```

> * 四舍六入，遇五取大。

**Math.random()随机数方法**

==Math.random()==方法返回[0,1)区间内的一个浮点，伪随机数，

语法：

```javascript
Math.random();
```

取一个闭区间的随机整数（包含闭区间两侧的整数）

语法：

```javascript
function getRandom(min,max) {
    return Math.floor(Math.random()*(max-min+1)+min);
}
```

#### Date对象

MDN的Date对象：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date

Date对象是一个构造函数，必须使用new来调用创建的对象。

**获取日期的指定部分**

| 方法名                           | 描述             |
| -------------------------------- | ---------------- |
| getFullYear()                    | 获取当年         |
| getMonth()                       | 获取当月（0-11） |
| getDate()                        | 获取当天日期     |
| getDay()                         | 获取星期         |
| getHours()                       | 获取当前小时     |
| getMinutes()                     | 获取当前分钟     |
| getSeconds()                     | 获取当前秒钟     |
| valueOf()，getTime()，Date.now() | 获取时间戳       |

> * 获取时间戳的常用写法：var date = +new Date();

**倒计时**

```javascript
function countDown(time) {
    var currentTime = +new Date();
    var inputTime = +new Date(time);
    var times = (inputTime - currentTime) / 1000;
    var days = parseInt(times / 60 / 60 / 24); //倒计时天数
    days = days < 10 ? '0' + days : days;
    var hours = parseInt(times / 60 / 60 % 24); //倒计时小时
    hours = hours < 10 ? '0' + hours : hours
    var minutes = parseInt(times / 60 % 60); //倒计时分钟
    minutes = minutes < 10 ? '0' + minutes : minutes
    var sceonds = parseInt(times % 60); //倒计时秒钟
    sceonds = sceonds < 10 ? '0' + sceonds : sceonds
    return days + '天' + hours + '时' + minutes + '分' + sceonds + '秒';
}
```

#### 数组对象

MDN的数组对象：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array

==Array.isArray()==用于确定传递的值是否为一个数组。

语法：

```javascript
Array.isArray(obj)
例：
Array.isArray([1, 2, 3]);  // true
Array.isArray({foo: 123}); // false
Array.isArray("foobar");   // false
Array.isArray(undefined);  // false
```

**添加或删除数组元素**

| 方法名            | 描述                                                       | 返回值             |
| ----------------- | ---------------------------------------------------------- | ------------------ |
| push(参数1...)    | 末尾添加一个或多个元素，注意修改原数组                     | 返回新的长度       |
| pop()             | 删除数组的最后一个元素，把数组长度减一。无参数，修改原数组 | 反正删除元素的值   |
| unshift(参数1...) | 向数组开头添加一个或多个元素，注意修改原数组               | 返回新的长度       |
| shift()           | 删除数组的第一个元素，数组长度减一。无参数，修改原数组     | 返回第一个元素的值 |

**数组排序**

​	

| 方法名    | 描述                         | 是否修改原数组               |
| --------- | ---------------------------- | ---------------------------- |
| reverse() | 颠倒数组中的元素顺序，无参数 | 会改变原来的数组，返回新数组 |
| sort()    | 对数组元素进行排序           | 会改变原来的数组，返回新数组 |

**获取数组的索引号**

| 方法名        | 描述                           | 返回值                         |
| ------------- | ------------------------------ | ------------------------------ |
| indexOf()     | 数组中查找给定元素的第一个索引 | 如果存在返回索引号，否则返回-1 |
| lastIndexof() | 在数组中的最后一个索引         | 如果存在返回索引号，否则返回-1 |

**数组去重**

核心算法：先遍历旧数组，再将旧数组元素去查询新数组，如果该元素在新数组中没有则添加，否则不添加。

```javascript
// 数组去重
function unique(arr) {
    var newArr =[];
    for(var i=0;i<arr.length;i++){
        if(newArr.indexOf(arr[i])===-1){
            newArr.push(arr[i]);
        }
    }
    return newArr;
}
console.log(unique([1,1,2,3,5,3,6,7,8,4,5,3])); 
//输出结果为：1，2，3，5，6，7，8，4
```

**数组转换为字符串**

| 方法名         | 描述                               | 返回值         |
| -------------- | ---------------------------------- | -------------- |
| toString()     | 把数组转换为字符串，逗号分隔每一项 | 返回一个字符串 |
| join('分隔符') | 把数组中的索引元素转换成一个字符串 | 返回一个字符串 |

**数组其他常用方法**

| 方法名   | 描述                                                         | 返回值                               |
| -------- | ------------------------------------------------------------ | ------------------------------------ |
| concat() | 用于合并两个或多个数组，不会更改现有的数组                   | 返回一个新数组                       |
| slice()  | 返回一个新的数组对象，这一对象是一个由 begin 和 end 决定的原数组的==浅拷贝==（包括 begin，不包括end）原始数组不会被改变 | 返回一个新的数组对象                 |
| splice() | 通过删除或替换现有元素或者原地添加新的元素来修改数组,并以数组形式返回被修改的内容 | 返回被删除元素的新数组，会修改原数组 |

#### 字符串对象

**基本包装类型**：把基本数据类型包装成复杂数据类型。

字符串的不可变

字符串的不可变指的是值不可变，内存会开辟新地址存放新的字符串，变量指向新的地址。

**根据字符返回位置**

| 方法名                                 | 描述                                                         |
| -------------------------------------- | ------------------------------------------------------------ |
| indexOf('要查找的字符',开始查找的位置) | 返回指定内容在原字符串中的位置，如果找不到则返回-1。开始位置是index的索引号 |
| lastIndexOf()                          | 从后往前找，只找第一个匹配的                                 |

**求某个字符出现的位置及次数**

核心算法：先查找第一个字符的位置，找到第一个位置，再使索引号+1，从而继续查找。

```javascript
//求字符出现的位置和次数
var str = 'sducsdbchbsdcjksnjnsjcnjncshdnksjnckJavaScriptd';
var index = str.indexOf('s');
var num = 0;
while (index !== -1) {
    console.log(index);
    num++;
    index = str.indexOf('s', index + 1);
}
console.log('出现次数：' + num);
```

**根据位置返回相应的字符**

| 方法名            | 描述                                        |
| ----------------- | ------------------------------------------- |
| charAt(index)     | 返回指定位置处的字符（index字符串的索引号） |
| charCodeAt(index) | 获取指定字符处的ASCII码（index索引号）      |
| str[index]        | 获取指定位置处字符                          |

**判断一个字符串中出现次数最多字符，并统计次数**

核心算法：利用charAt()遍历整个字符，把每个字符存给一个对象，如果这个对象没有该属性则为1，否则+1。

```javascript
var str2 = 'mdjdcjknkJavaScriptncbusaiwuhujahuiunsidas';
var o = {};
for (var i = 0; i < str2.length; i++) {
    var chars = str2.charAt(i);
    if (o[chars]) {
        o[chars]++;
    } else {
        o[chars] = 1;
    }
}
console.log(o);
var max = 0;
var ch = '';
for (var k in o) {
    if (o[k] > max) {
        max = o[k];
    }
    ch = [k];
}
console.log('出现最多的字符是：' + ch + ';' + '出现的次数是：' + max);
```

**拼接以及截取字符串**

| 方法名               | 描述                                                        |
| -------------------- | ----------------------------------------------------------- |
| concat(str1...)      | 用于连接两个或多个字符串。                                  |
| substr(start,lenght) | 中start位置开始，lenght为取得个数（==重点==）               |
| slice(start,end)     | 从start位置开始，截取到end的位置，end截取不到               |
| substring(start,end) | 从start位置开始，截取到end的位置，end截取不到，不会接受负值 |

**替换字符串以及转换成数组**

| 方法名           | 描述                                                         |
| ---------------- | ------------------------------------------------------------ |
| replace()        |                                                              |
| splice('分隔符') | 使用指定分隔符将一个字符串对象分隔成子字符串数组，以一个指定的分割字串来决定每个拆分的位置 |

## 堆和栈

栈：由操作系统自动分配释放存放函数的参数值，局部变量的值等。

==简单数据类型存放在栈中==

堆：一般由程序员分配释放，若程序员不释放，则由垃圾回收机制回收。

==复杂数据类型存放在堆中==

---


