# Shell

shell是指一种应用程序，shell提供一个界面，用户通过这个界面访问操作系统内核的服务。

shell和shell script是两个不同的概念。

## shell 中的特殊符号

| 符号 | 描述                                                        |
|------|-------------------------------------------------------------|
| ！   | 执行历史命令                                                |
| $    | 读取变量                                                    |
| &    | 后台执行                                                    |
| *    | 通配符，匹配所有                                            |
| ？   | 通配符，匹配除回车以外的一个字符                            |
| ;    | 可以在一行中执行多个命令，命令之间以分号分割                |
| \    | 转义字符                                                    |
| ``   | 反引号，在命令中执行命令。例如，echo "today is `date + %F`" |
| ''   | 单引号，包裹字符串，但不解释变量                            |
| ""   | 双引号，包裹字符串                                          |

## 输入输出重定向

Linux中标准的输入设备默认指的是键盘，标准的输出设备默认指的是显示器。

```
输入重定向：指的是重新指定设备来代替键盘作为新的输入设备。

输出重定向：指的是重新指定设备来代替显示器作为新的输出设备。
```

### 输入重定向

---

| 命令符号格式   | 描述                                                                   |
|----------------|------------------------------------------------------------------------|
| 命令 < 文件    | 将指定文件作为命令的输入设备                                           |
| 命令 << 分界符 | 从标准输入设备中读入，直到遇到分界符才停止，分界符可以是自定义的字符串 |
| 命令 < 文件1 > 文件2           | 将文件1作为命令的输入设备，该命令的执行结果输出到文件2中                                                                   |

### 输出重定向

---

输出重定向可以分为`标准输出重定向`和`错误输出重定向`。

例：

```sh
gin@arch-huawei-gin ~/tmp $ touch demo-01.txt

gin@arch-huawei-gin ~/tmp $ ll demo-01.txt
-rw-r--r-- 1 gin gin 0 Sep  6 17:31 demo-01.txt

gin@arch-huawei-gin ~/tmp $ ll demo-02.txt
ls: cannot access 'demo-02.txt': No such file or directory
```

`demo-01.txt`文件是存在的，因此正确输出了该文件的一些属性信息，这是该命令执行的标准输出信息。

`demo-02.txt`是不存在的，因此命令的执行结果显示错误信息，是该命令的错误输出信息。

要把原本输出到屏幕上的数据转而写入文件中，`标准输出信息`和`错误输出信息`要区别对待。

| 命令符号格式                          | 描述                                             |
|---------------------------------------|--------------------------------------------------|
| 命令 > 文件                           | 覆盖原文件内容，将标准输出结果重定向到指定文件中 |
| 命令 2> 文件                          | 覆盖原文件内容，将错误输出结果重定向到指定文件中 |
| 命令 >> 文件                          | 将标准输出结果重定向到指定文件原有内容的后面     |
| 命令 2>> 文件                         | 将错误输出结果重定向到指定文件原有内容的后面     |
| 命令 >> 文件 2> &1 或者 命令 &>> 文件 | 将标准输出或错误输出追加写入指定文件原有内容的后面                                             |

## echo命令

将内容输出到标准输出，并在最后加上换行符。

选项：

```
-n：不自动换行

-e：转义字符
```

| 转义字符 | 描述                           |
|----------|--------------------------------|
| \a       | 发出警报声                     |
| \b       | 删除前一个字符                 |
| \c       | 最后不加上换行符               |
| \f       | 换行但光标仍然停留在原来的位置 |
| \n       | 换行且光标移至行首             |
| \r       | 光标移至行首，但不换行         |
| \t       | 插入tab                        |

## read命令

接受键盘输入。

选项：

```
-p：打印信息

-t：限定时间

-s：不回显

-n：输入字符的个数
```

<++>

## 变量

变量名和等号之间不能有空格。

变量名命名规则：

```
* 命名只能使用英文字母，数字和下划线，首个字符不能以数字开头
* 中间不能有空格，可以使用下滑线
* 不能使用标点符号
* 不能使用bash里的关键字
```

### 使用变量

使用一个变量，只需要在变量名之前加上美元符号。

```shell
A="hello"

echo $A 或 echo ${A}
```

花括号可选，建议加上花括号，花括号是为了帮助解析器识别变量的边界。

### 只读变量

使用" readonly "命令可以将变量定义为只读变量，只读变量的值不能改变。

```shell
A="hello"

readonly A

A="hello world"

echo ${A}

// 输入的是"hello"，变量的之不可改变
```

### 删除变量

使用" unset "命令可以删除变量。

```shell
A="hello"

unset A

echo A
```

变量被删除后不能再次使用，" unset "命令不能删除只读变量。

### 变量类型

```
1. 局部变量：局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。

2. 环境变量：所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证正常运行，必要的时候shell脚本也可以定义环境变量。

3. shell变量：shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证shell的正常运行。
```

### shell字符串

字符串是shell中最常用最有用的数据类型，字符串可以用单引号，可以使用双引号，也可以不使用引号。

#### 单引号

```shell
str='this is a string'
```

单引号字符串的限制：

```
* 单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的。

* 单引号字符串中不能出现单独一个单引号，单引号中使用转义字符也不行，但是可以成对出现，作为字符串拼接使用。
```

#### 双引号

```shell
<++>
```

<++>


